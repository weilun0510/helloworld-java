# å­—æ®µæ›´æ–°é€»è¾‘æµ‹è¯•ç”¨ä¾‹

## ğŸ“‹ æµ‹è¯•ç¯å¢ƒå‡†å¤‡

### 1. åˆ›å»ºæµ‹è¯•é¡¹ç›®

```http
POST http://localhost:8080/project
Content-Type: application/json

{
  "name": "åŸå§‹é¡¹ç›®åç§°",
  "status": "è¿›è¡Œä¸­",
  "cover": "https://example.com/original-cover.jpg"
}
```

å‡è®¾åˆ›å»ºæˆåŠŸï¼Œè¿”å› ID = 1

## âœ… æµ‹è¯•ç”¨ä¾‹

### ç”¨ä¾‹ 1ï¼šåªæ›´æ–° statusï¼ˆå¿…å¡«å­—æ®µï¼‰

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "status": "å·²å®Œæˆ"
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "åŸå§‹é¡¹ç›®åç§°",        // âœ… ä¿æŒä¸å˜
      "status": "å·²å®Œæˆ",            // âœ… å·²æ›´æ–°
      "cover": "https://example.com/original-cover.jpg",  // âœ… ä¿æŒä¸å˜
      "createTime": "2024-11-24 14:30:00"  // âœ… ä¿æŒä¸å˜
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… status æˆåŠŸæ›´æ–°
- âœ… name æ²¡æœ‰å˜åŒ–
- âœ… cover æ²¡æœ‰å˜åŒ–
- âœ… createTime æ²¡æœ‰å˜åŒ–

---

### ç”¨ä¾‹ 2ï¼šå°è¯•æ¸…ç©º nameï¼ˆå¿…å¡«å­—æ®µï¼‰- ä¼ ç©ºå­—ç¬¦ä¸²

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "name": ""
}
```

**é¢„æœŸå“åº”**ï¼ˆ400 Bad Requestï¼‰ï¼š
```json
{
  "success": false,
  "code": 40001,
  "message": "å‚æ•°é”™è¯¯: é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º",
  "data": {}
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å› 400 é”™è¯¯
- âœ… é”™è¯¯ä¿¡æ¯æ¸…æ™°
- âœ… name æ²¡æœ‰è¢«ä¿®æ”¹ï¼ˆæŸ¥è¯¢ç¡®è®¤ï¼‰

---

### ç”¨ä¾‹ 3ï¼šå°è¯•æ¸…ç©º statusï¼ˆå¿…å¡«å­—æ®µï¼‰- ä¼  null

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "status": null
}
```

**é¢„æœŸå“åº”**ï¼ˆ400 Bad Requestï¼‰ï¼š
```json
{
  "success": false,
  "code": 40001,
  "message": "å‚æ•°é”™è¯¯: é¡¹ç›®çŠ¶æ€ä¸èƒ½ä¸ºç©º",
  "data": {}
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å› 400 é”™è¯¯
- âœ… status æ²¡æœ‰è¢«ä¿®æ”¹

---

### ç”¨ä¾‹ 4ï¼šæ¸…ç©º coverï¼ˆå¯é€‰å­—æ®µï¼‰- ä¼ ç©ºå­—ç¬¦ä¸²

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "cover": ""
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "åŸå§‹é¡¹ç›®åç§°",
      "status": "è¿›è¡Œä¸­",
      "cover": null,  // âœ… å·²æ¸…ç©º
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… cover è¢«æ¸…ç©ºä¸º null
- âœ… å…¶ä»–å­—æ®µä¿æŒä¸å˜

---

### ç”¨ä¾‹ 5ï¼šæ¸…ç©º coverï¼ˆå¯é€‰å­—æ®µï¼‰- ä¼  null

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "cover": null
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "åŸå§‹é¡¹ç›®åç§°",
      "status": "è¿›è¡Œä¸­",
      "cover": null,  // âœ… å·²æ¸…ç©º
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… cover è¢«æ¸…ç©ºä¸º null
- âœ… null å’Œ "" æ•ˆæœç›¸åŒï¼ˆå¯¹äºå¯é€‰å­—æ®µï¼‰

---

### ç”¨ä¾‹ 6ï¼šæ›´æ–° cover ä¸ºæ–°å€¼

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "cover": "https://example.com/new-cover.jpg"
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "åŸå§‹é¡¹ç›®åç§°",
      "status": "è¿›è¡Œä¸­",
      "cover": "https://example.com/new-cover.jpg",  // âœ… å·²æ›´æ–°
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… cover æˆåŠŸæ›´æ–°ä¸ºæ–°å€¼

---

### ç”¨ä¾‹ 7ï¼šåŒæ—¶æ›´æ–°å¤šä¸ªå­—æ®µ

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "name": "é¡¹ç›®åç§° V2",
  "status": "å·²å®Œæˆ",
  "cover": "https://example.com/v2-cover.jpg"
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "é¡¹ç›®åç§° V2",     // âœ… å·²æ›´æ–°
      "status": "å·²å®Œæˆ",        // âœ… å·²æ›´æ–°
      "cover": "https://example.com/v2-cover.jpg",  // âœ… å·²æ›´æ–°
      "createTime": "2024-11-24 14:30:00"  // âœ… ä¿æŒä¸å˜
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… æ‰€æœ‰ä¼ å…¥å­—æ®µéƒ½æˆåŠŸæ›´æ–°
- âœ… createTime ä¿æŒä¸å˜

---

### ç”¨ä¾‹ 8ï¼šä¼ ç©ºå¯¹è±¡ï¼ˆä¸æ›´æ–°ä»»ä½•å­—æ®µï¼‰

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "é¡¹ç›®åç§° V2",
      "status": "å·²å®Œæˆ",
      "cover": "https://example.com/v2-cover.jpg",
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… æ‰€æœ‰å­—æ®µä¿æŒä¸å˜
- âœ… è¿”å›æˆåŠŸï¼ˆè€Œä¸æ˜¯é”™è¯¯ï¼‰

---

### ç”¨ä¾‹ 9ï¼šæ›´æ–°æ—¶ä¼ å…¥å‰åæœ‰ç©ºæ ¼çš„å€¼

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "name": "  é¡¹ç›®åç§°å¸¦ç©ºæ ¼  ",
  "status": "  è¿›è¡Œä¸­  "
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "é¡¹ç›®åç§°å¸¦ç©ºæ ¼",   // âœ… è‡ªåŠ¨ trim
      "status": "è¿›è¡Œä¸­",         // âœ… è‡ªåŠ¨ trim
      "cover": "https://example.com/v2-cover.jpg",
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… å‰åç©ºæ ¼è¢«è‡ªåŠ¨æ¸…é™¤
- âœ… ä¸­é—´ç©ºæ ¼ä¿ç•™

---

### ç”¨ä¾‹ 10ï¼šæ›´æ–°ä¸å­˜åœ¨çš„é¡¹ç›®

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/999
Content-Type: application/json

{
  "status": "å·²å®Œæˆ"
}
```

**é¢„æœŸå“åº”**ï¼ˆ404 Not Foundï¼‰ï¼š
```json
{
  "success": false,
  "code": 40400,
  "message": "é¡¹ç›® ä¸å­˜åœ¨: ID = 999",
  "data": {}
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å› 404 é”™è¯¯
- âœ… é”™è¯¯ä¿¡æ¯æ˜ç¡®

---

### ç”¨ä¾‹ 11ï¼šå‚æ•°éªŒè¯ - name é•¿åº¦è¶…é™

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "name": "è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°è¶…é•¿çš„é¡¹ç›®åç§°"
}
```

**é¢„æœŸå“åº”**ï¼ˆ400 Bad Requestï¼‰ï¼š
```json
{
  "success": false,
  "code": 40000,
  "message": "å‚æ•°éªŒè¯å¤±è´¥: é¡¹ç›®åç§°é•¿åº¦å¿…é¡»åœ¨1-100ä¹‹é—´",
  "data": {}
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… è¿”å› 400 é”™è¯¯
- âœ… è‡ªåŠ¨éªŒè¯å­—æ®µé•¿åº¦

---

### ç”¨ä¾‹ 12ï¼šè¾¹ç•Œå€¼æµ‹è¯• - æœ€å°é•¿åº¦

**è¯·æ±‚**ï¼š
```http
PATCH http://localhost:8080/project/1
Content-Type: application/json

{
  "name": "A"
}
```

**é¢„æœŸå“åº”**ï¼ˆ200 OKï¼‰ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": {
    "project": {
      "id": 1,
      "name": "A",  // âœ… æœ€å°é•¿åº¦ 1 å­—ç¬¦
      "status": "å·²å®Œæˆ",
      "cover": "https://example.com/v2-cover.jpg",
      "createTime": "2024-11-24 14:30:00"
    }
  }
}
```

**éªŒè¯ç‚¹**ï¼š
- âœ… æœ€å°é•¿åº¦ 1 å­—ç¬¦å¯ä»¥é€šè¿‡

---

## ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»è¡¨

| ç”¨ä¾‹ | æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|------|---------|---------|---------|------|
| 1 | åªæ›´æ–° status | 200, status æ›´æ–° | | â¬œ |
| 2 | æ¸…ç©º name ("") | 400, æ‹’ç» | | â¬œ |
| 3 | æ¸…ç©º status (null) | 400, æ‹’ç» | | â¬œ |
| 4 | æ¸…ç©º cover ("") | 200, cover = null | | â¬œ |
| 5 | æ¸…ç©º cover (null) | 200, cover = null | | â¬œ |
| 6 | æ›´æ–° cover | 200, cover æ›´æ–° | | â¬œ |
| 7 | åŒæ—¶æ›´æ–°å¤šä¸ªå­—æ®µ | 200, å…¨éƒ¨æ›´æ–° | | â¬œ |
| 8 | ç©ºå¯¹è±¡ {} | 200, æ— æ›´æ–° | | â¬œ |
| 9 | å¸¦ç©ºæ ¼çš„å€¼ | 200, è‡ªåŠ¨ trim | | â¬œ |
| 10 | æ›´æ–°ä¸å­˜åœ¨çš„é¡¹ç›® | 404, èµ„æºä¸å­˜åœ¨ | | â¬œ |
| 11 | name é•¿åº¦è¶…é™ | 400, éªŒè¯å¤±è´¥ | | â¬œ |
| 12 | æœ€å°é•¿åº¦è¾¹ç•Œ | 200, æ›´æ–°æˆåŠŸ | | â¬œ |

## ğŸ” é¢å¤–éªŒè¯ç‚¹

### éªŒè¯ createTime ä¸å˜

åœ¨ä»»ä½•æ›´æ–°æ“ä½œåï¼Œæ‰§è¡Œï¼š

```http
GET http://localhost:8080/project/1
```

æ£€æŸ¥ `createTime` å­—æ®µæ˜¯å¦å§‹ç»ˆä¿æŒåˆå§‹å€¼ã€‚

### éªŒè¯å¹¶å‘æ›´æ–°

1. ä¸¤ä¸ªå®¢æˆ·ç«¯åŒæ—¶æ›´æ–°åŒä¸€ä¸ªé¡¹ç›®
2. éªŒè¯æ•°æ®ä¸€è‡´æ€§
3. éªŒè¯æ˜¯å¦æœ‰æ•°æ®ä¸¢å¤±

### éªŒè¯æ•°æ®åº“å®é™…å€¼

æ›´æ–°åç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼š

```sql
SELECT * FROM project WHERE id = 1;
```

ç¡®è®¤æ•°æ®åº“ä¸­çš„å€¼ä¸ API è¿”å›çš„ä¸€è‡´ã€‚

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šç©ºå­—ç¬¦ä¸²æ²¡æœ‰è¢«æ‹’ç»

**æ£€æŸ¥**ï¼š
- `validateRequiredFields()` æ˜¯å¦è¢«è°ƒç”¨
- æ˜¯å¦æ­£ç¡®åˆ¤æ–­äº† `trim().isEmpty()`

### é—®é¢˜ 2ï¼šæœªä¼ å­—æ®µä¹Ÿè¢«æ›´æ–°äº†

**æ£€æŸ¥**ï¼š
- æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº† `isXxxSet()` åˆ¤æ–­
- setter æ–¹æ³•æ˜¯å¦æ­£ç¡®è®¾ç½®äº†æ ‡è®°

### é—®é¢˜ 3ï¼šcreateTime è¢«ä¿®æ”¹äº†

**æ£€æŸ¥**ï¼š
- Entity ä¸­æ˜¯å¦æœ‰ `@TableField(update = "false")`
- æ›´æ–°é€»è¾‘ä¸­æ˜¯å¦æ„å¤–è®¾ç½®äº† createTime

### é—®é¢˜ 4ï¼šnull å’Œç©ºå­—ç¬¦ä¸²å¤„ç†ä¸ä¸€è‡´

**æ£€æŸ¥**ï¼š
- å¯¹äºå¯é€‰å­—æ®µï¼Œæ˜¯å¦éƒ½æ¸…ç©ºä¸º null
- å¯¹äºå¿…å¡«å­—æ®µï¼Œæ˜¯å¦éƒ½æ‹’ç»æ›´æ–°

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å­—æ®µæ›´æ–°é€»è¾‘æŒ‡å—](./UPDATE_FIELD_LOGIC_GUIDE.md)
- [API æµ‹è¯•ç¤ºä¾‹](./API_TEST_EXAMPLES.md)
- [å…¨å±€å¼‚å¸¸å¤„ç†å™¨æŒ‡å—](./GLOBAL_EXCEPTION_HANDLER_GUIDE.md)

## ğŸ› ï¸ æµ‹è¯•å·¥å…·

æ¨èä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œæµ‹è¯•ï¼š

1. **VS Code REST Client** - å¿«é€Ÿæµ‹è¯•
2. **Postman** - è‡ªåŠ¨åŒ–æµ‹è¯•
3. **JUnit** - å•å…ƒæµ‹è¯•
4. **æ•°æ®åº“å®¢æˆ·ç«¯** - éªŒè¯æ•°æ®

---

**æµ‹è¯•ç›®æ ‡**ï¼šç¡®ä¿å­—æ®µæ›´æ–°é€»è¾‘å®Œå…¨ç¬¦åˆä¼ä¸šçº§æ ‡å‡†

æ‰€æœ‰ç”¨ä¾‹é€šè¿‡åï¼Œå¯ä»¥å°†æ­¤æ¨¡å¼åº”ç”¨åˆ°å…¶ä»–æ¨¡å—ï¼âœ…

